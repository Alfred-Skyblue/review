<!DOCTYPE html>
<html>
	<head lang="en">
		<meta charset="UTF-8">
		<title></title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			.box {
				width: 300px;
				height: 500px;
				border: 1px solid red;
				margin: 100px;
				position: relative;
				overflow: hidden;
			}

			.content {
				padding: 5px 18px 5px 5px;
				position: absolute;
				top: 0;
				left: 0;

			}

			.scroll {
				width: 18px;
				height: 100%;
				position: absolute;
				top: 0;
				right: 0;
				background-color: #eee;
			}

			.bar {
				height: 100px;
				width: 100%;
				position: absolute;
				top: 0;
				left: 0;
				background-color: red;
				border-radius: 10px;
				cursor: pointer;
			}
		</style>
	</head>
	<body>
		<div class="box" id="box">
			<div class="content" id="content">
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头
				床前明月光啊，明月光，疑是地上霜啊，举头嘿嘿

			</div>
			<!--文字内容-->
			<div id="scroll" class="scroll">
				<!--装滚动条的层-->
				<div class="bar" id="bar"></div>
				<!--滚动条-->
			</div>
		</div>
		<script src="common.js"></script>
		<script>
			
			// 获取最外面的div
			var box=document.querySelector("#box");
			// 文字div
			var content=my$("content")
			//装滚动条的div
			var scroll=my$("scroll");
			// 滚动条
			var bar =my$("bar");
			
			// 滚动条高度/装滚动条的div的高度=box的高度/文字div的高度
			// 滚动条的高度=装滚动条div的高度*box的高度/文字div的高度
			bar.style.height=scroll.offsetHeight*box.offsetHeight/content.offsetHeight+"px";
			
			
			
			bar.onmousedown=function (e) {
				var spaceY=e.clientY-bar.offsetTop;
				
				document.onmousemove=function (e) {
					var y=e.clientY-spaceY;
					y=y<0?0:y;//鼠标可移动的最小值
					y=y>scroll.offsetHeight-bar.offsetHeight?scroll.offsetHeight-bar.offsetHeight:y;
					bar.style.top=y+"px";
					
					//文字移动距离/文字移动的最大距离=滚动条移动距离/滚动条移动的最大距离
					// 文字移动距离=文字移动的最大距离*滚动条移动距离/滚动条移动的最大距离
					
					var moveY=(content.offsetHeight-box.offsetHeight)*y/(scroll.offsetHeight-bar.offsetHeight);
					// 设置文字的移动距离
					content.style.marginTop=-moveY+"px";
					
					
					//鼠标移动的时候,文本不被选中的兼容性代码
					window.getSelection? window.getSelection().removeAllRanges():document.selection.empty();
				};
			};
			
			
			
			
			document.onmouseup=function () {
				// 鼠标抬起的时候,把鼠标移动事件清除
				document.onmousemove=null;
			};
			
			
			
			
			
		</script>

	</body>
</html>