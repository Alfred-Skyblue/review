<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}

			div {
				width: 200px;
				height: 100px;
				background-color: skyblue;
				margin-top: 50px;
				position: absolute;
				left: 0;
				top: 0;
			}

			button {
				margin: 20px;

			}
		</style>
	</head>
	<body>

		<button id="btn1">移动到400px</button>
		<button id="btn2">移动到800px</button>
		<div id="dv"></div>
		<script src="common.js"></script>
		<script>
			//点击按钮移动div
			my$("btn1").onclick = function() {
				animate(my$("dv"), 400);
			};
			my$("btn2").addEventListener("click", function() {
				animate(my$("dv"), 800);
			})

			function animate(element, target) {
				// 首先清理定时器
				clearInterval(element.timeId);
				element.timeId = setInterval(function() {
					// 获取元素当前的位置
					var current = element.offsetLeft;

					// 变速移动距离公式
					var step = (target - current) / 10;
					// 由于会存在小数问题,所以需要计算向上或者向下取整
					step = target > current ? Math.ceil(step) : Math.floor(step);
					
					element.style.left = current + step + "px";
					//如果到达目标位置,清理定时器
					if (current == target) {
						clearInterval(element.timeId);
					}
					console.log("目标位置：" + target + "，当前位置：" + current + "，每次移动的步数：" + step);

				}, 15)
			}
		</script>













	</body>
</html>
