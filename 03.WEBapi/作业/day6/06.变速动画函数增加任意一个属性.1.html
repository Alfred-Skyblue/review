<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			*{
				margin: 0;
				padding: 0;
			}
			div {
				width: 200px;
				height: 100px;
				background-color: skyblue;
				margin-top: 50px;
				position: absolute;
				left: 0;
				top: 0;
			}
			button {
				margin: 20px;
				
			}
		</style>
	</head>
	<body>
		
		<button id="btn1">移动到400px</button>
		<button id="btn2">移动到800px</button>
		<div id="dv"></div>
		<script src="common.js"></script>
		<script>
			
			//点击按钮移动div
			my$("btn1").onclick=function () {
				animate(my$("dv"),"left",400);
			};
			my$("btn2").addEventListener("click",function () {
				animate(my$("dv"),"top",300);
			})
			
			/**
			 * @param {Object} element
			 * 元素
			 * @param {Object} attr
			 * 属性
			 * @param {Object} target
			 * 属性目标值
			 */
			function animate(element,attr,target) {
				clearInterval(element.timeId);
				element.timeId=setInterval(function () {
					// 获取元素的当前位置
					var current=parseInt(getStyle(element,attr));//转换为数字类型
					// 每次移动的距离
					var step=(target-current)/10;
					step=step>0?Math.ceil(step):Math.floor(step);
					element.style[attr]=current+step+"px";
					
					if (current==target) {
						// 到达目标,清理定时器
						clearInterval(element.timeId);
					}
					
					// 测试代码
					console.log("目标位置："+target+"，当前位置："+current+"，每次移动的步数："+step);
				},20)
			}
			
			
			
			//获取任意元素的任意样式属性值
			function getStyle(element,attr) {
							//判断浏览器是否支持这个方法	
							return window.getComputedStyle?window.getComputedStyle(element,null)[attr]:element.currentStyle[attr];
						}
		</script>
			
			
				
				
				
			
			
			
			
			
			
		
		
	</body>
</html>
