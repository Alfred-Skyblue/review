<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			*{
				margin: 0;
				padding: 0;
			}
			div {
				width: 200px;
				height: 100px;
				background-color: skyblue;
				margin-top: 50px;
				position: absolute;
				left: 0;
				top: 0;
			}
			button {
				margin: 20px;
				
			}
		</style>
	</head>
	<body>
		
		<button id="btn1">移动到400px</button>
		<button id="btn2">移动到800px</button>
		<div id="dv"></div>
		<script src="common.js"></script>
		<script>
			
			//点击按钮移动div
			my$("btn1").onclick=function () {
				animate(my$("dv"),400);
			};
			my$("btn2").addEventListener("click",function () {
				animate(my$("dv"),800);
			})
			
			function animate(element,target) {
				// 清理定时器
				clearInterval(element.timeId);
				element.timeId=setInterval(function () {
					// 获取元素当前距离左边的位置
					var current=element.offsetLeft;
					
					// 定义每次移动的距离
					var step=8;
					// 判断走正数或者负数
					step=current>target?-step:step;
					
					//判断,如果当前位置距离目标位置小于每次移动的步数,则直接移动到目标位置,反之,正常移动
					if (Math.abs(target-current)<Math.abs(step)) {
						element.style.left=target+"px";
						clearInterval(element.timeId);
					}else{
						element.style.left=current+step+"px";
					}
					
				},20)
			}
			
		</script>
			
			
				
				
				
			
			
			
			
			
			
		
		
	</body>
</html>
