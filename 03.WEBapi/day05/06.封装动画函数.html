<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			* {
			      margin: 0;
			      padding: 0;
			    }
			
			    input {
			      margin-top: 20px;
			    }
			
			    div {
			      margin-top: 30px;
			      width: 200px;
			      height: 100px;
			      background-color: green;
			      position: absolute;
			    }
			  </style>
	</head>
	<body>
		<input type="button" value="移动到400px" id="btn1" />
		<input type="button" value="移动到800px" id="btn2" />
		<div id="dv"></div>
		<script src="common.js"></script>
		<script>
			//封装动画函数

			my$("btn1").onclick = function() {
				animate(my$("dv"), 400)
			};

			my$("btn2").onclick = function() {
				animate(my$("dv"), 800)
			};
			//动画函数


			function animate(element, target) {

				clearInterval(element.timeId);

				element.timeId = setInterval(function() {
					//获取当前div的位置
					var current = element.offsetLeft; //数字类型,没有px
					//div每次移动的距离
					var step = 10;
					
					step = current < target ? step : -step;
					//每次移动后的距离
					current += step;
  
					//判断是否到达目标位置,如果到达目标位置,则清理定时器
					if (Math.abs(target - current) > Math.abs(step)) {
						//设置div的目标位置
						element.style.left = current + "px";
					} else {
						clearInterval( element.timeId );
						element.style.left = target + "px";
					}
				}, 20)

			};
		</script>
	</body>
</html>
